$(function(){var options={lines:{show:!0},points:{show:!0},xaxis:{tickDecimals:0,tickSize:1}},data=[];$.plot("#placeholder",data,options);var alreadyFetched={};$("button.fetchSeries").click(function(){function onDataReceived(series){var firstcoordinate="("+series.data[0][0]+", "+series.data[0][1]+")";button.siblings("span").text("Fetched "+series.label+", first point: "+firstcoordinate),alreadyFetched[series.label]||(alreadyFetched[series.label]=!0,data.push(series)),$.plot("#placeholder",data,options)}var button=$(this),dataurl=button.siblings("a").attr("href");$.ajax({url:dataurl,type:"GET",dataType:"json",success:onDataReceived})}),$("button.dataUpdate").click(function(){function fetchData(){function onDataReceived(series){data=[series],$.plot("#placeholder",data,options)}++iteration,$.ajax({url:"data-eu-gdp-growth-"+iteration+".json",type:"GET",dataType:"json",success:onDataReceived}),5>iteration?setTimeout(fetchData,1e3):(data=[],alreadyFetched={})}data=[],alreadyFetched={},$.plot("#placeholder",data,options);var iteration=0;setTimeout(fetchData,1e3)}),$("button.fetchSeries:first").click(),$("#footer").prepend("Flot "+$.plot.version+" &ndash; ")});